<section id="indexes">

    <section>
        <h2>Les index</h2>
    </section>

    <section>
        <h3>Qu'est ce qu'un index ?</h3>
        <p>Afin de permettre d'optimiser les performances, la plupart des SGBD permettent de définir des index sur des colonnes.</p>
        <p>Les index créent en mémoire des structures de données permettant d'optimiser les recherches en organisant les données.</p>
        <img src="assets/images/indexes.png" alt="MySQL Index">
        <footer>
            <a href="#" style="font-size: 0.8em" class="warning">Les index entraînent des ralentissements sur les opérations d'écriture</a>
            <a href="https://github.com/datacharmer/test_db" class="info" target="_blank">Exemple de base de données pour tests de performance MySQL</a>
        </footer>
    </section>

    <section>
        <h3>Créer un index</h3>
        <p>Il est possible de créer plusieurs types d'index.</p>
        <pre><code class="language-sql">CREATE INDEX idx_nom_prenom ON utilisateur (nom, prenom); -- Optimisation des requêtes sur les colonnes nom et prenom
CREATE UNIQUE INDEX idx_uq_email ON utilisateur (email); -- Optimisation des requêtes sur la colonne email et ajout d'une contrainte d'unicité</code></pre>
        <p>Pour supprimer un index :</p>
        <pre><code class="language-sql">ALTER TABLE utilisateur DROP INDEX idx_nom_prenom;</code></pre>
        <footer>
            <a href="#" style="font-size: 0.7em" class="warning">La création d'un index peut prendre du temps si la table contient de nombreuses lignes</a>
        </footer>
    </section>

    <section>
        <h3>Les index FULLTEXT</h3>
        <p>Pour effectuer des recherches avancées sur des champs textes, il est possible de définir des index de type FULLTEXT :</p>
        <pre><code class="language-sql">ALTER TABLE article ADD FULLTEXT (titre, contenu);</code></pre>
        <p>Il sera alors possible d'utiliser les fonctions <code class="language-sql">MATCH</code> et <code class="language-sql">AGAINST</code> pour récupérer un score lors d'une recherche :</p>
        <pre><code class="language-sql">SELECT *, MATCH(titre, contenu) AGAINST ('recherche fulltext') AS score
FROM article;</code></pre>
        <footer>
            <a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-search.html" target="_blank" class="info">MySQL FULLTEXT</a>
        </footer>
    </section>

</section>